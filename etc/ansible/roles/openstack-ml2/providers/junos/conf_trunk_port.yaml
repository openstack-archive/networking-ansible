---
- name: "junos: run configure trunk port using network_cli"
  junos_command:
    commands:
      - config
      - "delete interfaces {{ port }}"
      - "set interfaces {{ port }} unit 0 family ethernet-switching interface-mode trunk"
      - "set interfaces {{ port }} native-vlan {{ _vlan_id }}"
      - "set interfaces {{ port }} unit 0 family ethernet-switching vlan members [{{ _vlan_id }}{% for vlan in vlans }} {{ vlans }}{{% endfor %}}]"
      - commit
  connection: network_cli
